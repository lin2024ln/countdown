<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>JEM TV Countdown</title>

<!-- Roboto ONLY -->
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700;900&display=swap" rel="stylesheet">

<style>
  * { box-sizing: border-box; }
  html,body{ margin:0; padding:0; }

  body {
    font-family: "Roboto", Arial, sans-serif;
    Background:#000;
  }

  /* TOP STRIP (NO BG) */
  .jem-countdown-wrap {
    width: 100%;
    border-bottom: 1px solid rgba(255,255,255,.12);
  }

  .jem-countdown {
    max-width: 1220px;
    margin: 0 auto;
    padding: 22px 16px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 22px;
    min-width: 0; /* critical */
  }

  /* LEFT CLUSTER: thumbnail + logo + tiny link */
  .jem-left{
    flex: 1 1 auto;         /* ✅ allow shrinking so timer never gets overlapped */
    min-width: 0;           /* ✅ critical */
    display: flex;
    align-items: center;
    gap: 14px;
  }

  /* 16:9 thumbnail (small) */
  .jem-thumb{
    flex: 0 0 auto;
    width: clamp(78px, 10.5vw, 112px);
    aspect-ratio: 16 / 9;
    border-radius: 10px;
    overflow: hidden;
    border: 1px solid rgba(255,255,255,.18);
    box-shadow: 0 8px 24px rgba(0,0,0,.25);
  }
  .jem-thumb img{
    width: 100%;
    height: 100%;
    object-fit: cover;
    display:block;
  }

  /* LOGO (shrinkable) */
  .jem-logo{
    flex: 0 1 auto;
    min-width: 0;           /* ✅ critical for ellipsis to work */
    display:flex;
    flex-direction: column;
    gap: 6px;
  }
  .jem-logo img {
    width: clamp(92px, 20vw, 160px);
    height: auto;
    display: block;
    filter: drop-shadow(0 0 18px rgba(255,255,255,.15));
  }

  /* ✅ prevent "More about..." from pushing into timer */
  .jem-mini-link{
    font-size: 11px;
    line-height: 1.2;
    color: rgba(255,255,255,.70);
    text-decoration: none;

    display: block;         /* keep under logo */
    max-width: clamp(120px, 16vw, 220px); /* ✅ cap width */
    overflow: hidden;       /* ✅ */
    text-overflow: ellipsis;/* ✅ */
    white-space: nowrap;    /* ✅ single line + ellipsis */
  }
  .jem-mini-link:hover{ color: rgba(255,255,255,.88); text-decoration: underline; }

  /* MIDDLE: title + (desktop) word */
  .jem-info{
    flex: 0 1 auto;
    min-width: 0;
    display:flex;
    align-items:center;
    justify-content:center;
    gap: 10px;
  }

  .jem-title{
    font-weight: 900;
    letter-spacing: .01em;
    color: #ffffff;
    text-shadow: 0 0 24px rgba(255,255,255,.18);
    font-size: clamp(14px, 2.1vw, 18px);
    line-height: 1.15;
    min-width: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 520px;
  }

  .jem-premieres{
    font-weight: 900;
    letter-spacing: .14em;
    text-transform: uppercase;
    color: rgba(255,255,255,.70);
    font-size: 11px;
    white-space: nowrap;
  }

  /* RIGHT: TIMER */
  .jem-timer {
    flex: 0 0 auto;        /* ✅ fixed width block; never gets squeezed into */
    min-width: 0;
    display: flex;
    gap: 22px;
    align-items: center;
    justify-content: flex-end;
  }

  .jem-unit {
    min-width: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    text-align: center;
  }

  .jem-label {
    font-size: 11px;
    letter-spacing: .16em;
    text-transform: uppercase;
    color: rgba(255,255,255,.65);
    white-space: nowrap;
  }

  .jem-number {
    font-size: clamp(16px, 5.2vw, 36px);
    font-weight: 900;
    line-height: 1;
    color: #ffffff;
    text-shadow: 0 0 24px rgba(255,255,255,.25);
  }

  /* AFTER LAUNCH: centered row thumbnail + button */
  .jem-after{
    max-width: 1220px;
    margin: 0 auto;
    padding: 22px 16px;
  }
  .jem-after-inner{
    display:flex;
    align-items:center;
    justify-content:center;
    gap: 16px;
    min-width:0;
    text-align:center;
  }
  .jem-after-block{
    display:flex;
    align-items:center;
    justify-content:center;
    gap: 14px;
    min-width:0;
    flex-wrap: wrap;
  }

  .jem-watch-btn{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    gap: 10px;
    padding: 7px 16px;
    border-radius: 7px;
    border: 1px solid rgba(255,255,255,.22);
    background: rgba(255,255,255,.08);
    color: #ffffff;
    text-decoration: none;
    font-weight: 900;
    letter-spacing: .02em;
    text-shadow: 0 0 18px rgba(255,255,255,.12);
    white-space: nowrap;
    box-shadow: 0 8px 24px rgba(0,0,0,.25);
  }
  .jem-watch-btn:hover{
    background: rgba(255,255,255,.12);
    border-color: rgba(255,255,255,.30);
  }
  .jem-watch-btn .jem-watch-sub{
    font-weight: 700;
    opacity: .82;
    letter-spacing: .04em;
  }

  /* MOBILE: remove middle text, keep left + timer */
  @media (max-width: 980px){
    .jem-info{ display:none !important; }
    .jem-countdown{ gap: 14px; }
    .jem-mini-link{ max-width: 160px; }
  }

  @media (max-width: 768px) {
    .jem-countdown {
      padding: 16px 12px;
      gap: 14px;
    }
    .jem-timer { gap: 14px; }
    .jem-unit { gap: 4px; }
    .jem-label { font-size: 8px; letter-spacing: .14em; }
    .jem-number { text-shadow: 0 0 14px rgba(255,255,255,.25); }

    .jem-mini-link { display: none; }

    .jem-logo::after {
      content: "Premieres in:";
      font-size: 11px;
      line-height: 1.2;
      color: rgba(255,255,255,.70);
      text-decoration: none;
    }

    /* after launch: keep centered, allow wrap */
    .jem-watch-btn{ width: auto; }
  }

  @media (max-width: 420px){
    .jem-timer{ gap: 10px; }
    .jem-label-min, .jem-label-sec{ font-size:0; }
    .jem-label-min::after{
      content:"Min";
      font-size:8px;
      letter-spacing:.14em;
      text-transform:uppercase;
      color:rgba(255,255,255,.65);
      display:inline-block;
    }
    .jem-label-sec::after{
      content:"Sec";
      font-size:8px;
      letter-spacing:.14em;
      text-transform:uppercase;
      color:rgba(255,255,255,.65);
      display:inline-block;
    }
  }
</style>
</head>

<body>

<!-- BEFORE LAUNCH STRIP -->
<div class="jem-countdown-wrap" id="jemCountdown">
  <div class="jem-countdown">

    <div class="jem-left">
      <a class="jem-thumb" href="https://www.enduringpeace.org/video/the-rebbes-roadmap-to-peace-episode-3" target="_blank" rel="noopener" aria-label="Open film page">
        <img src="https://res.cloudinary.com/jemdev/image/upload/v1766693706/maxresdefault_343ca01dd7.jpg" alt="Film thumbnail">
      </a>

      <div class="jem-logo">
        <img
          src="https://res.cloudinary.com/jemdev/image/upload/v1751394501/Group_1597880754_197fa55471.png"
          alt="JEM TV">
        <a class="jem-mini-link" href="https://www.enduringpeace.org/video/the-rebbes-roadmap-to-peace-episode-3" target="_blank" rel="noopener">
          More about this Film
        </a>
      </div>
    </div>

    <!-- DESKTOP ONLY text -->
    <div class="jem-info" aria-label="Premiere information">
      <div class="jem-title" title="The Rebbe's Roadmap to Peace — Episode 3">
        The Rebbe's Roadmap to Peace — Episode 3
      </div>
      <div class="jem-premieres">Premieres in</div>
    </div>

    <!-- countdown -->
    <div class="jem-timer" role="timer" aria-live="polite">
      <div class="jem-unit">
        <div class="jem-label">Days</div>
        <div class="jem-number" id="cd-d">0</div>
      </div>

      <div class="jem-unit">
        <div class="jem-label">Hours</div>
        <div class="jem-number" id="cd-h">00</div>
      </div>

      <div class="jem-unit">
        <div class="jem-label jem-label-min">Minutes</div>
        <div class="jem-number" id="cd-m">00</div>
      </div>

      <div class="jem-unit">
        <div class="jem-label jem-label-sec">Seconds</div>
        <div class="jem-number" id="cd-s">00</div>
      </div>
    </div>

  </div>
</div>

<!-- AFTER LAUNCH: centered thumbnail + Watch now button (same link) -->
<div class="jem-countdown-wrap" id="jemAfterWrap" style="display:none;">
  <div class="jem-after">
    <div class="jem-after-inner">
      <div class="jem-after-block">
        <a class="jem-thumb" href="https://www.enduringpeace.org/video/the-rebbes-roadmap-to-peace-episode-3" target="_blank" rel="noopener" aria-label="Open film page">
          <img src="https://res.cloudinary.com/jemdev/image/upload/v1766693706/maxresdefault_343ca01dd7.jpg" alt="Film thumbnail">
        </a>

        <a class="jem-watch-btn"
           href="https://www.enduringpeace.org/video/the-rebbes-roadmap-to-peace-episode-3"
           target="_blank" rel="noopener">
          Watch now
        </a>
      </div>
    </div>
  </div>
</div>

<script>
  /* CONFIG */
  const LAUNCH_ISO = "2025-12-28T14:00:00-05:00"; // December 28, 2:00 PM EST

  const $ = id => document.getElementById(id);
  const pad = n => String(n).padStart(2, "0");
  const launchMs = Date.parse(LAUNCH_ISO);

  function showAfterLaunch() {
    document.getElementById("jemCountdown").style.display = "none";
    document.getElementById("jemAfterWrap").style.display = "block";
  }

  function tick() {
    if (Number.isNaN(launchMs)) return;

    const now = Date.now();
    let s = Math.floor((launchMs - now) / 1000);

    if (s <= 0) {
      showAfterLaunch();
      return;
    }

    $("cd-d").textContent = Math.floor(s / 86400);
    $("cd-h").textContent = pad(Math.floor((s % 86400) / 3600));
    $("cd-m").textContent = pad(Math.floor((s % 3600) / 60));
    $("cd-s").textContent = pad(s % 60);
  }

  setInterval(tick, 250);
  tick();
</script>

</body>
</html>
